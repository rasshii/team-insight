# ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¨æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

**ã“ã®ã‚¬ã‚¤ãƒ‰ã§å­¦ã¹ã‚‹ã“ã¨**ï¼š
- Team Insightã®ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ
- å„æŠ€è¡“ã®åŸºæœ¬æ¦‚å¿µã¨ä½¿ã„æ–¹
- å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å½¹å‰²ã¨é€£æºæ–¹æ³•
- ãªãœã“ã‚Œã‚‰ã®æŠ€è¡“ã‚’é¸ã‚“ã ã®ã‹

## ğŸ“ ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“æ§‹æˆ

### Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®åŸºæœ¬æ§‹é€ 

ã¾ãšã€ä¸€èˆ¬çš„ãªWebã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒã©ã®ã‚ˆã†ã«å‹•ä½œã™ã‚‹ã‹ç†è§£ã—ã¾ã—ã‚‡ã†ã€‚

#### å¾“æ¥ã®Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
```
ãƒ¦ãƒ¼ã‚¶ãƒ¼ â†’ Webã‚µãƒ¼ãƒãƒ¼ â†’ ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ â†’ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
         â†              â†                  â†
```

#### ãƒ¢ãƒ€ãƒ³ãªWebã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆTeam Insightï¼‰
```
ãƒ¦ãƒ¼ã‚¶ãƒ¼ â†’ ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼ˆReactï¼‰ â†’ ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰API â†’ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
         â† (JavaScript/HTML/CSS)   â† (JSON)          â†
```

**ãƒ¡ãƒªãƒƒãƒˆ**ï¼š
- ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¨ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚’ç‹¬ç«‹ã—ã¦é–‹ç™ºã§ãã‚‹
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ãŒå‘ä¸Šï¼ˆãƒšãƒ¼ã‚¸é·ç§»ãªã—ã§å‹•çš„ã«æ›´æ–°ï¼‰
- ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ãŒé«˜ã„ï¼ˆãã‚Œãã‚Œåˆ¥ã€…ã«æ‹¡å¼µå¯èƒ½ï¼‰

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦

Team Insightã¯ã€ä»¥ä¸‹ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§æ§‹æˆã•ã‚Œã‚‹ãƒ¢ãƒ€ãƒ³ãªWebã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ãƒ–ãƒ©ã‚¦ã‚¶                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚ http://localhost
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Nginx (ãƒªãƒãƒ¼ã‚¹ãƒ—ãƒ­ã‚­ã‚·)                   â”‚
â”‚  ãƒ»é™çš„ãƒ•ã‚¡ã‚¤ãƒ«é…ä¿¡                                          â”‚
â”‚  ãƒ»APIãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°                               â”‚
â”‚  ãƒ»ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚·ãƒ³ã‚°ï¼ˆå°†æ¥ï¼‰                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚ :3000                    â”‚ :8000
           â–¼                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Next.js Frontend    â”‚    â”‚    FastAPI Backend             â”‚
â”‚  ãƒ»React Components  â”‚    â”‚    ãƒ»REST API                  â”‚
â”‚  ãƒ»Redux Toolkit     â”‚â—€â”€â”€â”€â”‚    ãƒ»Business Logic            â”‚
â”‚  ãƒ»TanStack Query    â”‚    â”‚    ãƒ»Authentication            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚           â”‚
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”   â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚ PostgreSQL â”‚   â”‚   Redis    â”‚
                            â”‚  Database  â”‚   â”‚   Cache    â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â–¼
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚  Backlog API   â”‚
                            â”‚  (External)    â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å½¹å‰²ï¼ˆè©³ç´°ï¼‰

#### 1. Nginxï¼ˆã‚¨ãƒ³ã‚¸ãƒ³ã‚¨ãƒƒã‚¯ã‚¹ï¼‰
**å½¹å‰²**: ãƒªãƒãƒ¼ã‚¹ãƒ—ãƒ­ã‚­ã‚·ï¼ˆäº¤é€šæ•´ç†å½¹ï¼‰

**ãªãœå¿…è¦ï¼Ÿ**
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ä¸€ã¤ã®URLï¼ˆhttp://localhostï¼‰ã§ã‚¢ã‚¯ã‚»ã‚¹ã—ãŸã„
- ã§ã‚‚å®Ÿéš›ã¯ã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼ˆ:3000ï¼‰ã¨ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼ˆ:8000ï¼‰ãŒåˆ¥ã€…
- NginxãŒãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é©åˆ‡ã«æŒ¯ã‚Šåˆ†ã‘ã‚‹

```nginx
# Nginxã®è¨­å®šä¾‹
location / {
    # é€šå¸¸ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¸
    proxy_pass http://frontend:3000;
}

location /api {
    # APIãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¸
    proxy_pass http://backend:8000;
}
```

#### 2. Frontendï¼ˆNext.jsï¼‰
**å½¹å‰²**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼ˆç”»é¢ï¼‰

**ç‰¹å¾´**:
- Reactï¼ˆUIãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼‰ã‚’ãƒ™ãƒ¼ã‚¹ã«ã—ãŸãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- TypeScriptã§å‹å®‰å…¨ãªé–‹ç™º
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ“ä½œã«å¿œã˜ã¦å‹•çš„ã«ç”»é¢ã‚’æ›´æ–°

#### 3. Backendï¼ˆFastAPIï¼‰
**å½¹å‰²**: ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã¨ãƒ‡ãƒ¼ã‚¿å‡¦ç†

**ç‰¹å¾´**:
- Pythonã§æ›¸ã‹ã‚ŒãŸé«˜é€ŸãªWebãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- è‡ªå‹•çš„ã«APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ç”Ÿæˆ
- å‹ãƒ’ãƒ³ãƒˆã«ã‚ˆã‚‹è‡ªå‹•ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

#### 4. PostgreSQL
**å½¹å‰²**: ãƒ‡ãƒ¼ã‚¿ã®æ°¸ç¶šçš„ãªä¿å­˜

**ç‰¹å¾´**:
- ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒŠãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆè¡¨å½¢å¼ã§ãƒ‡ãƒ¼ã‚¿ã‚’ç®¡ç†ï¼‰
- SQLã¨ã„ã†è¨€èªã§ãƒ‡ãƒ¼ã‚¿ã‚’æ“ä½œ
- ACIDç‰¹æ€§ï¼ˆãƒ‡ãƒ¼ã‚¿ã®æ•´åˆæ€§ã‚’ä¿è¨¼ï¼‰

#### 5. Redis
**å½¹å‰²**: é«˜é€Ÿãªã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸

**ç‰¹å¾´**:
- ãƒ¡ãƒ¢ãƒªä¸Šã§ãƒ‡ãƒ¼ã‚¿ã‚’ç®¡ç†ï¼ˆè¶…é«˜é€Ÿï¼‰
- ä¸€æ™‚çš„ãªãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ã«ä½¿ç”¨
- ã‚»ãƒƒã‚·ãƒ§ãƒ³æƒ…å ±ã‚„APIãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥

### ã‚µãƒ¼ãƒ“ã‚¹æ§‹æˆã¨ãƒãƒ¼ãƒˆ

| ã‚µãƒ¼ãƒ“ã‚¹ | å†…éƒ¨ãƒãƒ¼ãƒˆ | å¤–éƒ¨ã‚¢ã‚¯ã‚»ã‚¹ | å½¹å‰² | ãªãœã“ã®ãƒãƒ¼ãƒˆï¼Ÿ |
|---------|-----------|-------------|------|----------------|
| Nginx | 80 | http://localhost | ãƒªãƒãƒ¼ã‚¹ãƒ—ãƒ­ã‚­ã‚· | HTTPã®æ¨™æº–ãƒãƒ¼ãƒˆ |
| Frontend | 3000 | - | Next.jsã‚¢ãƒ—ãƒª | Next.jsã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ |
| Backend | 8000 | - | FastAPI API | FastAPIã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ |
| PostgreSQL | 5432 | localhost:5432 | ãƒ¡ã‚¤ãƒ³DB | PostgreSQLã®æ¨™æº–ãƒãƒ¼ãƒˆ |
| Redis | 6379 | localhost:6379 | ã‚­ãƒ£ãƒƒã‚·ãƒ¥ | Redisã®æ¨™æº–ãƒãƒ¼ãƒˆ |
| MailHog | 8025 | localhost:8025 | ãƒ¡ãƒ¼ãƒ«ç¢ºèªUI | MailHogã®WebUIç”¨ |

## ğŸ› ï¸ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯è©³ç´°

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰æŠ€è¡“

#### FastAPI (v0.109.2) - è©³ç´°è§£èª¬

**FastAPIã¨ã¯ï¼Ÿ**
FastAPIã¯ã€Pythonã§æ›¸ã‹ã‚ŒãŸæœ€æ–°ã®Webãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã™ã€‚APIã‚’ç°¡å˜ã«ã€ãã—ã¦é«˜é€Ÿã«ä½œã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

**åŸºæœ¬çš„ãªæ§‹æ–‡ã¨æ¦‚å¿µ**ï¼š

1. **æœ€å°é™ã®APIã®ä¾‹**
```python
from fastapi import FastAPI

# ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆ
app = FastAPI()

# ãƒ«ãƒ¼ãƒˆï¼ˆã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼‰ã‚’å®šç¾©
@app.get("/")  # GETãƒ¡ã‚½ãƒƒãƒ‰ã§"/"ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ãŸã¨ãã®å‡¦ç†
def read_root():
    return {"message": "Hello World"}

# ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å—ã‘å–ã‚‹ä¾‹
@app.get("/users/{user_id}")  # URLãƒ‘ã‚¹ã‹ã‚‰ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å–å¾—
def read_user(user_id: int):  # å‹ãƒ’ãƒ³ãƒˆã§è‡ªå‹•çš„ã«intã«å¤‰æ›
    return {"user_id": user_id}
```

2. **å‹ãƒ’ãƒ³ãƒˆã«ã‚ˆã‚‹è‡ªå‹•ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³**
```python
from pydantic import BaseModel

# ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£ã®å‹ã‚’å®šç¾©
class User(BaseModel):
    name: str
    age: int
    email: str

@app.post("/users/")
def create_user(user: User):  # è‡ªå‹•çš„ã«JSONã‚’Userã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å¤‰æ›
    # userã¯Userå‹ã¨ã—ã¦æ‰±ãˆã‚‹
    return {"name": user.name, "age": user.age}
```

3. **éåŒæœŸå‡¦ç†ï¼ˆasync/awaitï¼‰**
```python
import asyncio

# éåŒæœŸé–¢æ•°ã®å®šç¾©
@app.get("/slow-operation")
async def slow_operation():
    # æ™‚é–“ã®ã‹ã‹ã‚‹å‡¦ç†ï¼ˆä¾‹ï¼šå¤–éƒ¨APIå‘¼ã³å‡ºã—ï¼‰
    await asyncio.sleep(1)  # 1ç§’å¾…æ©Ÿï¼ˆä»–ã®å‡¦ç†ã‚’ãƒ–ãƒ­ãƒƒã‚¯ã—ãªã„ï¼‰
    return {"status": "complete"}
```

**Team Insightã§ã®å®Ÿè£…**ï¼š
```python
# backend/app/main.py ã‚ˆã‚Š
app = FastAPI(
    title=settings.APP_NAME,              # APIã®åå‰
    openapi_url=f"{settings.API_V1_STR}/openapi.json",  # APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®URL
    lifespan=lifespan,                    # èµ·å‹•ãƒ»çµ‚äº†æ™‚ã®å‡¦ç†
    debug=settings.DEBUG                  # ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰
)
```

**é¸å®šç†ç”±**ï¼š
- **é«˜é€Ÿ**: Starlette + Pydanticã«ã‚ˆã‚‹æœ€é€Ÿãƒ¬ãƒ™ãƒ«ã®Python Webãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- **å‹å®‰å…¨**: Pythonã®å‹ãƒ’ãƒ³ãƒˆã‚’æ´»ç”¨ã—ãŸè‡ªå‹•ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
- **è‡ªå‹•ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: OpenAPIï¼ˆSwaggerï¼‰ã®è‡ªå‹•ç”Ÿæˆ
- **éåŒæœŸå¯¾å¿œ**: async/awaitã‚’ãƒ•ãƒ«ã‚µãƒãƒ¼ãƒˆ
- **å­¦ç¿’ã—ã‚„ã™ã„**: Pythonã®æ¨™æº–çš„ãªæ›¸ãæ–¹ã§å®Ÿè£…ã§ãã‚‹

#### SQLAlchemy 2.0 + PostgreSQL - è©³ç´°è§£èª¬

**SQLAlchemyã¨ã¯ï¼Ÿ**
SQLAlchemyã¯ã€Pythonã®ORMï¼ˆObject-Relational Mappingï¼‰ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’Pythonã®ã‚¯ãƒ©ã‚¹ã¨ã—ã¦æ‰±ãˆã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

**åŸºæœ¬æ¦‚å¿µã®èª¬æ˜**ï¼š

1. **å¾“æ¥ã®SQLï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ“ä½œï¼‰**
```sql
-- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œæˆ
INSERT INTO users (email, name) VALUES ('user@example.com', 'John Doe');

-- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’æ¤œç´¢
SELECT * FROM users WHERE email = 'user@example.com';
```

2. **SQLAlchemyã‚’ä½¿ã£ãŸå ´åˆ**
```python
# ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œæˆï¼ˆPythonã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦ï¼‰
user = User(email='user@example.com', name='John Doe')
db.add(user)
db.commit()

# ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’æ¤œç´¢ï¼ˆPythonã®æ§‹æ–‡ã§ï¼‰
user = db.query(User).filter(User.email == 'user@example.com').first()
```

**SQLAlchemyã®åŸºæœ¬çš„ãªä½¿ã„æ–¹**ï¼š

```python
from sqlalchemy import Column, String, Integer, create_engine
from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy.orm import sessionmaker

# ãƒ™ãƒ¼ã‚¹ã‚¯ãƒ©ã‚¹ã‚’ä½œæˆ
Base = declarative_base()

# ãƒ¢ãƒ‡ãƒ«ï¼ˆãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰ã‚’å®šç¾©
class User(Base):
    __tablename__ = "users"  # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ãƒ†ãƒ¼ãƒ–ãƒ«å
    
    # ã‚«ãƒ©ãƒ ï¼ˆåˆ—ï¼‰ã‚’å®šç¾©
    id = Column(Integer, primary_key=True)  # ä¸»ã‚­ãƒ¼
    email = Column(String, unique=True)     # ãƒ¦ãƒ‹ãƒ¼ã‚¯åˆ¶ç´„
    name = Column(String, nullable=False)   # NULLä¸å¯
    age = Column(Integer)                   # é€šå¸¸ã®ã‚«ãƒ©ãƒ 

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«æ¥ç¶š
engine = create_engine('postgresql://user:password@localhost/dbname')
Session = sessionmaker(bind=engine)
db = Session()

# CRUDæ“ä½œã®ä¾‹
# Createï¼ˆä½œæˆï¼‰
new_user = User(email='test@example.com', name='Test User', age=25)
db.add(new_user)
db.commit()

# Readï¼ˆèª­ã¿å–ã‚Šï¼‰
users = db.query(User).all()  # ã™ã¹ã¦å–å¾—
user = db.query(User).filter(User.email == 'test@example.com').first()

# Updateï¼ˆæ›´æ–°ï¼‰
user.age = 26
db.commit()

# Deleteï¼ˆå‰Šé™¤ï¼‰
db.delete(user)
db.commit()
```

**Team Insightã§ã®å®Ÿè£…**ï¼š
```python
# backend/app/models/user.py ã‚ˆã‚Š
class User(Base):
    __tablename__ = "users"
    __table_args__ = {"schema": "team_insight"}  # ã‚¹ã‚­ãƒ¼ãƒã‚’æŒ‡å®š
    
    # UUIDã‚’ä¸»ã‚­ãƒ¼ã¨ã—ã¦ä½¿ç”¨ï¼ˆã‚ˆã‚Šå®‰å…¨ï¼‰
    id = Column(UUID(as_uuid=True), primary_key=True, default=uuid.uuid4)
    email = Column(String, unique=True, index=True, nullable=False)
    name = Column(String, nullable=False)
    
    # ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆä»–ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã¨ã®é–¢é€£ï¼‰
    user_roles = relationship("UserRole", back_populates="user")
```

**PostgreSQLã¨ã¯ï¼Ÿ**
PostgreSQLã¯ã€é«˜æ©Ÿèƒ½ãªã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã®ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒŠãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã§ã™ã€‚

**ãªãœPostgreSQLï¼Ÿ**
- **ä¿¡é ¼æ€§**: å¤§è¦æ¨¡ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã‚‚å®‰å®šå‹•ä½œ
- **é«˜æ©Ÿèƒ½**: JSONå‹ã€é…åˆ—å‹ã€å…¨æ–‡æ¤œç´¢ãªã©
- **æ‹¡å¼µæ€§**: å¿…è¦ã«å¿œã˜ã¦æ©Ÿèƒ½ã‚’è¿½åŠ å¯èƒ½
- **æ¨™æº–æº–æ‹ **: SQLæ¨™æº–ã«æº–æ‹ 

**é¸å®šç†ç”±**ï¼š
- **å¼·åŠ›ãªORM**: è¤‡é›‘ãªã‚¯ã‚¨ãƒªã‚‚ç°¡æ½”ã«è¨˜è¿°å¯èƒ½
- **å‹å®‰å…¨**: SQLAlchemy 2.0ã®æ”¹å–„ã•ã‚ŒãŸå‹ã‚µãƒãƒ¼ãƒˆ
- **PostgreSQL**: ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºãƒ¬ãƒ™ãƒ«ã®æ©Ÿèƒ½ã¨ä¿¡é ¼æ€§

#### Redis - è©³ç´°è§£èª¬

**Redisã¨ã¯ï¼Ÿ**
Redisï¼ˆRemote Dictionary Serverï¼‰ã¯ã€ãƒ¡ãƒ¢ãƒªä¸Šã§ãƒ‡ãƒ¼ã‚¿ã‚’ç®¡ç†ã™ã‚‹é«˜é€ŸãªKey-Valueã‚¹ãƒˆã‚¢ã§ã™ã€‚

**ãªãœã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒå¿…è¦ï¼Ÿ**
```
é€šå¸¸ã®ãƒ•ãƒ­ãƒ¼ï¼š
ãƒ¦ãƒ¼ã‚¶ãƒ¼ â†’ API â†’ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆé…ã„ï¼š10-100msï¼‰
           â†     â†

Redisã‚’ä½¿ã£ãŸãƒ•ãƒ­ãƒ¼ï¼š
ãƒ¦ãƒ¼ã‚¶ãƒ¼ â†’ API â†’ Redisï¼ˆé€Ÿã„ï¼š1msä»¥ä¸‹ï¼‰
           â†     â†
                  â†“ ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒŸã‚¹ã®å ´åˆã®ã¿
                  ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
```

**Redisã®åŸºæœ¬çš„ãªä½¿ã„æ–¹**ï¼š

```python
import redis
import json

# Redisã«æ¥ç¶š
r = redis.Redis(host='localhost', port=6379, db=0)

# åŸºæœ¬çš„ãªæ“ä½œ
# SET: ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜
r.set('user:1', 'John Doe')

# GET: ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
name = r.get('user:1')  # b'John Doe' (ãƒã‚¤ãƒˆæ–‡å­—åˆ—)

# æœ‰åŠ¹æœŸé™ä»˜ãã§ä¿å­˜ï¼ˆTTL: Time To Liveï¼‰
r.setex('session:abc123', 3600, 'user_data')  # 1æ™‚é–“å¾Œã«è‡ªå‹•å‰Šé™¤

# JSONãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜
user_data = {
    'id': 1,
    'name': 'John Doe',
    'email': 'john@example.com'
}
r.set('user:1:profile', json.dumps(user_data))

# JSONãƒ‡ãƒ¼ã‚¿ã®å–å¾—
cached_data = r.get('user:1:profile')
if cached_data:
    user = json.loads(cached_data)
```

**Team Insightã§ã®å®Ÿè£…**ï¼š
```python
# backend/app/core/cache.py ã‚ˆã‚Š
class RedisClient:
    async def cache_api_response(
        self, 
        key: str, 
        data: dict, 
        expire: int = 300  # 5åˆ†
    ):
        """APIãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥"""
        redis_conn = await self.get_connection()
        await redis_conn.setex(
            key,
            expire,
            json.dumps(data)
        )
    
    async def get_cached_data(self, key: str):
        """ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—"""
        redis_conn = await self.get_connection()
        cached = await redis_conn.get(key)
        if cached:
            return json.loads(cached)
        return None

# ä½¿ç”¨ä¾‹
@app.get("/projects")
async def get_projects():
    # ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚­ãƒ¼ã‚’ä½œæˆ
    cache_key = f"projects:user:{current_user.id}"
    
    # ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ç¢ºèª
    cached = await redis_client.get_cached_data(cache_key)
    if cached:
        return cached  # ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰è¿”ã™ï¼ˆé«˜é€Ÿï¼‰
    
    # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰å–å¾—
    projects = db.query(Project).all()
    
    # ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã«ä¿å­˜
    await redis_client.cache_api_response(cache_key, projects)
    
    return projects
```

**Redisã®æ´»ç”¨ä¾‹**ï¼š
1. **APIãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥**
   - é »ç¹ã«ã‚¢ã‚¯ã‚»ã‚¹ã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’é«˜é€ŸåŒ–
   
2. **ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†**
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã‚’ä¿å­˜
   
3. **ãƒ¬ãƒ¼ãƒˆåˆ¶é™**
   - APIã¸ã®éåº¦ãªã‚¢ã‚¯ã‚»ã‚¹ã‚’é˜²ã
   ```python
   # 1åˆ†é–“ã«10å›ã¾ã§ã®ã‚¢ã‚¯ã‚»ã‚¹åˆ¶é™
   key = f"rate_limit:{user_id}"
   count = r.incr(key)
   if count == 1:
       r.expire(key, 60)  # 60ç§’å¾Œã«è‡ªå‹•å‰Šé™¤
   if count > 10:
       raise HTTPException(429, "Too many requests")
   ```

**é¸å®šç†ç”±**ï¼š
- **é«˜é€Ÿã‚­ãƒ£ãƒƒã‚·ãƒ¥**: ãƒŸãƒªç§’å˜ä½ã§ã®ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹
- **æŸ”è»Ÿãªãƒ‡ãƒ¼ã‚¿æ§‹é€ **: æ–‡å­—åˆ—ã€ãƒªã‚¹ãƒˆã€ã‚»ãƒƒãƒˆã€ãƒãƒƒã‚·ãƒ¥ãªã©
- **è‡ªå‹•å‰Šé™¤æ©Ÿèƒ½**: TTLã«ã‚ˆã‚‹ãƒ¡ãƒ¢ãƒªç®¡ç†
- **ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£**: åˆ†æ•£ç’°å¢ƒã§ã‚‚åˆ©ç”¨å¯èƒ½

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰æŠ€è¡“

#### Next.js 14.1 (App Router) - è©³ç´°è§£èª¬

**Next.jsã¨ã¯ï¼Ÿ**
Next.jsã¯ã€Reactãƒ™ãƒ¼ã‚¹ã®ãƒ•ãƒ«ã‚¹ã‚¿ãƒƒã‚¯ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã™ã€‚Reactã®æ©Ÿèƒ½ã‚’æ‹¡å¼µã—ã€æœ¬ç•ªç’°å¢ƒã«å¿…è¦ãªæ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚

**React vs Next.js**
```
React: UIãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼ˆç”»é¢ã®éƒ¨å“ã‚’ä½œã‚‹ï¼‰
Next.js: Reactã‚’ä½¿ã£ãŸãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ï¼ˆã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã‚’æ§‹ç¯‰ï¼‰
```

**App Routerã¨ã¯ï¼Ÿ**
Next.js 13ã‹ã‚‰å°å…¥ã•ã‚ŒãŸæ–°ã—ã„ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ã§ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ãƒ™ãƒ¼ã‚¹ã§ãƒšãƒ¼ã‚¸ã‚’ä½œæˆã—ã¾ã™ã€‚

**åŸºæœ¬çš„ãªæ§‹é€ **ï¼š
```
src/app/
â”œâ”€â”€ layout.tsx          # å…¨ãƒšãƒ¼ã‚¸å…±é€šã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”œâ”€â”€ page.tsx           # ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ï¼ˆ/ï¼‰
â”œâ”€â”€ about/
â”‚   â””â”€â”€ page.tsx       # /about ãƒšãƒ¼ã‚¸
â”œâ”€â”€ blog/
â”‚   â”œâ”€â”€ page.tsx       # /blog ãƒšãƒ¼ã‚¸
â”‚   â””â”€â”€ [id]/
â”‚       â””â”€â”€ page.tsx   # /blog/123 ãªã©ã®å‹•çš„ãƒ«ãƒ¼ãƒˆ
â””â”€â”€ api/
    â””â”€â”€ hello/
        â””â”€â”€ route.ts   # /api/hello APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
```

**åŸºæœ¬çš„ãªä½¿ã„æ–¹**ï¼š

1. **ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**
```typescript
// src/app/page.tsx
export default function HomePage() {
  return (
    <div>
      <h1>ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸</h1>
      <p>ã“ã‚ŒãŒãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã§ã™</p>
    </div>
  )
}
```

2. **ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**
```typescript
// src/app/layout.tsx
export default function RootLayout({
  children,  // ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒå…¥ã‚‹
}: {
  children: React.ReactNode
}) {
  return (
    <html lang="ja">
      <body>
        <header>
          <nav>å…±é€šãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³</nav>
        </header>
        <main>{children}</main>
        <footer>å…±é€šãƒ•ãƒƒã‚¿ãƒ¼</footer>
      </body>
    </html>
  )
}
```

3. **å‹•çš„ãƒ«ãƒ¼ãƒˆ**
```typescript
// src/app/projects/[id]/page.tsx
interface Props {
  params: { id: string }  // URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
}

export default function ProjectPage({ params }: Props) {
  // /projects/123 ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨ params.id = "123"
  return <div>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆID: {params.id}</div>
}
```

4. **Server Componentsï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰**
```typescript
// ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§å®Ÿè¡Œã•ã‚Œã‚‹
async function ProjectList() {
  // ã‚µãƒ¼ãƒãƒ¼ã§ç›´æ¥ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ã§ã¯å®Ÿè¡Œã•ã‚Œãªã„ï¼‰
  const projects = await fetch('http://backend:8000/api/projects')
  
  return (
    <ul>
      {projects.map(p => <li key={p.id}>{p.name}</li>)}
    </ul>
  )
}
```

5. **Client Componentsï¼ˆã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªè¦ç´ ï¼‰**
```typescript
'use client'  // ã“ã®æŒ‡å®šã§ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«ãªã‚‹

import { useState } from 'react'

export function Counter() {
  const [count, setCount] = useState(0)
  
  // ãƒ–ãƒ©ã‚¦ã‚¶ã§å®Ÿè¡Œã•ã‚Œã‚‹ï¼ˆã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ï¼‰
  return (
    <button onClick={() => setCount(count + 1)}>
      ã‚¯ãƒªãƒƒã‚¯æ•°: {count}
    </button>
  )
}
```

**Team Insightã§ã®å®Ÿè£…**ï¼š
```typescript
// frontend/src/app/layout.tsx ã‚ˆã‚Š
export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <html lang="ja">
      <body>
        <Providers>{children}</Providers>  {/* Redux/React Query ã®è¨­å®š */}
      </body>
    </html>
  )
}
```

**é¸å®šç†ç”±**ï¼š
- **Server Components**: åˆæœŸèª­ã¿è¾¼ã¿ã®é«˜é€ŸåŒ–ï¼ˆã‚µãƒ¼ãƒãƒ¼ã§HTMLç”Ÿæˆï¼‰
- **App Router**: ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ï¼URLæ§‹é€ ã§ç›´æ„Ÿçš„
- **TypeScriptæ¨™æº–**: å‹ã«ã‚ˆã‚‹ãƒã‚°ã®æ—©æœŸç™ºè¦‹
- **æœ€é©åŒ–**: è‡ªå‹•çš„ãªã‚³ãƒ¼ãƒ‰åˆ†å‰²ã€ç”»åƒæœ€é©åŒ–ã€ãƒ•ã‚©ãƒ³ãƒˆæœ€é©åŒ–
- **é–‹ç™ºä½“é¨“**: ãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰ã€ã‚¨ãƒ©ãƒ¼è¡¨ç¤ºã®æ”¹å–„

#### Redux Toolkit + TanStack Query - è©³ç´°è§£èª¬

**çŠ¶æ…‹ç®¡ç†ã¨ã¯ï¼Ÿ**
Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯ã€æ§˜ã€…ãªãƒ‡ãƒ¼ã‚¿ï¼ˆçŠ¶æ…‹ï¼‰ã‚’ç®¡ç†ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼š
- ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ï¼ˆãƒ­ã‚°ã‚¤ãƒ³ä¸­ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰
- UIã®çŠ¶æ…‹ï¼ˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒé–‹ã„ã¦ã„ã‚‹ã‹ã€ãªã©ï¼‰
- ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿ï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä¸€è¦§ã€ãªã©ï¼‰

**ãªãœ2ã¤ã®çŠ¶æ…‹ç®¡ç†ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã„åˆ†ã‘ã‚‹ï¼Ÿ**

1. **Redux Toolkit**: ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆçŠ¶æ…‹ï¼ˆã‚¢ãƒ—ãƒªå†…ã®çŠ¶æ…‹ï¼‰
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼æƒ…å ±
   - UIã®çŠ¶æ…‹ï¼ˆãƒ†ãƒ¼ãƒã€è¨€èªè¨­å®šãªã©ï¼‰
   - ã‚¢ãƒ—ãƒªå…¨ä½“ã§å…±æœ‰ã™ã‚‹è¨­å®š

2. **TanStack Query**: ã‚µãƒ¼ãƒãƒ¼çŠ¶æ…‹ï¼ˆAPIã‹ã‚‰å–å¾—ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ï¼‰
   - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä¸€è¦§
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±
   - ã‚¿ã‚¹ã‚¯ãƒ‡ãƒ¼ã‚¿

**Redux Toolkitã®åŸºæœ¬**ï¼š

```typescript
// 1. ã‚¹ãƒ©ã‚¤ã‚¹ï¼ˆçŠ¶æ…‹ã®ä¸€éƒ¨ï¼‰ã‚’å®šç¾©
import { createSlice } from '@reduxjs/toolkit'

const authSlice = createSlice({
  name: 'auth',
  initialState: {
    user: null,
    isAuthenticated: false
  },
  reducers: {
    // çŠ¶æ…‹ã‚’æ›´æ–°ã™ã‚‹é–¢æ•°ï¼ˆã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼‰
    login: (state, action) => {
      state.user = action.payload
      state.isAuthenticated = true
    },
    logout: (state) => {
      state.user = null
      state.isAuthenticated = false
    }
  }
})

// 2. ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ä½¿ç”¨
import { useSelector, useDispatch } from 'react-redux'

function UserProfile() {
  // çŠ¶æ…‹ã‚’å–å¾—
  const user = useSelector(state => state.auth.user)
  // ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã™ã‚‹é–¢æ•°ã‚’å–å¾—
  const dispatch = useDispatch()
  
  const handleLogout = () => {
    dispatch(authSlice.actions.logout())
  }
  
  return (
    <div>
      <p>ãƒ¦ãƒ¼ã‚¶ãƒ¼å: {user?.name}</p>
      <button onClick={handleLogout}>ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</button>
    </div>
  )
}
```

**TanStack Queryï¼ˆReact Queryï¼‰ã®åŸºæœ¬**ï¼š

```typescript
// 1. ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ã‚’ä½œæˆ
import { useQuery, useMutation } from '@tanstack/react-query'

// ãƒ‡ãƒ¼ã‚¿å–å¾—ç”¨ã®ãƒ•ãƒƒã‚¯
export function useProjects() {
  return useQuery({
    queryKey: ['projects'],  // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®ã‚­ãƒ¼
    queryFn: async () => {
      // APIã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
      const response = await fetch('/api/projects')
      return response.json()
    },
    staleTime: 5 * 60 * 1000,  // 5åˆ†é–“ã¯å†å–å¾—ã—ãªã„
  })
}

// ãƒ‡ãƒ¼ã‚¿æ›´æ–°ç”¨ã®ãƒ•ãƒƒã‚¯
export function useCreateProject() {
  const queryClient = useQueryClient()
  
  return useMutation({
    mutationFn: async (newProject) => {
      const response = await fetch('/api/projects', {
        method: 'POST',
        body: JSON.stringify(newProject)
      })
      return response.json()
    },
    onSuccess: () => {
      // æˆåŠŸã—ãŸã‚‰ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä¸€è¦§ã‚’å†å–å¾—
      queryClient.invalidateQueries(['projects'])
    }
  })
}

// 2. ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ä½¿ç”¨
function ProjectList() {
  // ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ï¼ˆè‡ªå‹•çš„ã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç®¡ç†ï¼‰
  const { data, isLoading, error } = useProjects()
  const createMutation = useCreateProject()
  
  if (isLoading) return <div>èª­ã¿è¾¼ã¿ä¸­...</div>
  if (error) return <div>ã‚¨ãƒ©ãƒ¼: {error.message}</div>
  
  return (
    <div>
      {data.map(project => (
        <div key={project.id}>{project.name}</div>
      ))}
      <button onClick={() => createMutation.mutate({ name: 'æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ' })}>
        ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
      </button>
    </div>
  )
}
```

**TanStack Queryã®ä¾¿åˆ©ãªæ©Ÿèƒ½**ï¼š

1. **è‡ªå‹•çš„ãªå†å–å¾—**
   ```typescript
   useQuery({
     queryKey: ['projects'],
     queryFn: fetchProjects,
     refetchInterval: 60000,      // 1åˆ†ã”ã¨ã«è‡ªå‹•æ›´æ–°
     refetchOnWindowFocus: true,  // ã‚¿ãƒ–ã«æˆ»ã£ãŸã¨ãã«æ›´æ–°
   })
   ```

2. **æ¥½è¦³çš„æ›´æ–°**
   ```typescript
   useMutation({
     mutationFn: updateProject,
     onMutate: async (newData) => {
       // å³åº§ã«UIã‚’æ›´æ–°ï¼ˆã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’å¾…ãŸãªã„ï¼‰
       queryClient.setQueryData(['project', id], newData)
     },
     onError: () => {
       // ã‚¨ãƒ©ãƒ¼æ™‚ã¯å…ƒã«æˆ»ã™
       queryClient.invalidateQueries(['project', id])
     }
   })
   ```

**Team Insightã§ã®å®Ÿè£…**ï¼š
```typescript
// frontend/src/hooks/queries/useProjects.ts ã‚ˆã‚Š
export const useProjects = () => {
  return useQuery({
    queryKey: ['projects'],               // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚­ãƒ¼
    queryFn: projectService.getProjects,  // APIå‘¼ã³å‡ºã—é–¢æ•°
    staleTime: 5 * 60 * 1000,            // 5åˆ†é–“ã‚­ãƒ£ãƒƒã‚·ãƒ¥
  })
}
```

**é¸å®šç†ç”±**ï¼š
- **å½¹å‰²åˆ†æ‹…**: ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆçŠ¶æ…‹ã¨ã‚µãƒ¼ãƒãƒ¼çŠ¶æ…‹ã‚’æ˜ç¢ºã«åˆ†é›¢
- **ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç®¡ç†**: TanStack QueryãŒè‡ªå‹•çš„ã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’æœ€é©åŒ–
- **é–‹ç™ºåŠ¹ç‡**: ãƒœã‚¤ãƒ©ãƒ¼ãƒ—ãƒ¬ãƒ¼ãƒˆã‚³ãƒ¼ãƒ‰ãŒå°‘ãªã„
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: å¿…è¦ãªãƒ‡ãƒ¼ã‚¿ã®ã¿ã‚’å–å¾—ãƒ»æ›´æ–°

#### shadcn/ui (Radix UI + Tailwind CSS) - è©³ç´°è§£èª¬

**å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: https://ui.shadcn.com/

shadcn/uiã¯ã€Radix UIã¨Tailwind CSSã‚’çµ„ã¿åˆã‚ã›ãŸãƒ¢ãƒ€ãƒ³ãªUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚

**ãªãœshadcn/uiã‚’é¸ã‚“ã ã‹**ï¼š
- **ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½**: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ç›´æ¥ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã‚³ãƒ”ãƒ¼
- **ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£**: Radix UIã«ã‚ˆã‚‹WAI-ARIAæº–æ‹ 
- **ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ **: ä¸€è²«æ€§ã®ã‚ã‚‹UI/UX
- **TypeScriptå¯¾å¿œ**: å®Œå…¨ãªå‹ã‚µãƒãƒ¼ãƒˆ

**Team Insightã§ã®å®Ÿè£…ä¾‹**ï¼š
```typescript
// components/ui/button.tsx
import * as React from "react"
import { Slot } from "@radix-ui/react-slot"
import { cva, type VariantProps } from "class-variance-authority"
import { cn } from "@/lib/utils"

const buttonVariants = cva(
  "inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2",
  {
    variants: {
      variant: {
        default: "bg-primary text-primary-foreground hover:bg-primary/90",
        destructive: "bg-destructive text-destructive-foreground hover:bg-destructive/90",
        outline: "border border-input bg-background hover:bg-accent",
        secondary: "bg-secondary text-secondary-foreground hover:bg-secondary/80",
        ghost: "hover:bg-accent hover:text-accent-foreground",
        link: "text-primary underline-offset-4 hover:underline",
      },
      size: {
        default: "h-10 px-4 py-2",
        sm: "h-9 rounded-md px-3",
        lg: "h-11 rounded-md px-8",
        icon: "h-10 w-10",
      },
    },
    defaultVariants: {
      variant: "default",
      size: "default",
    },
  }
)

export interface ButtonProps
  extends React.ButtonHTMLAttributes<HTMLButtonElement>,
    VariantProps<typeof buttonVariants> {
  asChild?: boolean
}

const Button = React.forwardRef<HTMLButtonElement, ButtonProps>(
  ({ className, variant, size, asChild = false, ...props }, ref) => {
    const Comp = asChild ? Slot : "button"
    return (
      <Comp
        className={cn(buttonVariants({ variant, size, className }))}
        ref={ref}
        {...props}
      />
    )
  }
)
Button.displayName = "Button"

export { Button, buttonVariants }
```

#### D3.js (7.8.5) - ãƒ‡ãƒ¼ã‚¿ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³

**å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: https://d3js.org/

D3.jsï¼ˆData-Driven Documentsï¼‰ã¯ã€ãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ã„ã¦å‹•çš„ãªãƒ“ã‚¸ãƒ¥ã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã™ã‚‹JavaScriptãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚

**Team Insightã§ã®æ´»ç”¨**ï¼š
- **ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆãƒãƒ£ãƒ¼ãƒˆ**: ã‚¿ã‚¹ã‚¯å®Œäº†ç‡ã®æ¨ç§»
- **å††ã‚°ãƒ©ãƒ•**: ã‚¿ã‚¹ã‚¯åˆ†é…ã®å¯è¦–åŒ–
- **æ£’ã‚°ãƒ©ãƒ•**: ãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼ã®ç”Ÿç”£æ€§æ¯”è¼ƒ
- **ãƒ’ãƒ¼ãƒˆãƒãƒƒãƒ—**: æ™‚é–“å¸¯åˆ¥ã®æ´»å‹•çŠ¶æ³

**å®Ÿè£…ä¾‹ - ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆãƒãƒ£ãƒ¼ãƒˆ**ï¼š
```typescript
// components/charts/ThroughputChart.tsx
import { useEffect, useRef } from 'react'
import * as d3 from 'd3'

export function ThroughputChart({ data }: { data: ThroughputData[] }) {
  const svgRef = useRef<SVGSVGElement>(null)

  useEffect(() => {
    if (!svgRef.current || !data.length) return

    const margin = { top: 20, right: 30, bottom: 40, left: 50 }
    const width = 600 - margin.left - margin.right
    const height = 400 - margin.top - margin.bottom

    // SVGè¦ç´ ã‚’ã‚¯ãƒªã‚¢
    d3.select(svgRef.current).selectAll("*").remove()

    const svg = d3.select(svgRef.current)
      .attr("width", width + margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom)

    const g = svg.append("g")
      .attr("transform", `translate(${margin.left},${margin.top})`)

    // ã‚¹ã‚±ãƒ¼ãƒ«ã®è¨­å®š
    const x = d3.scaleTime()
      .domain(d3.extent(data, d => new Date(d.date)) as [Date, Date])
      .range([0, width])

    const y = d3.scaleLinear()
      .domain([0, d3.max(data, d => d.completed) as number])
      .range([height, 0])

    // ãƒ©ã‚¤ãƒ³ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼
    const line = d3.line<ThroughputData>()
      .x(d => x(new Date(d.date)))
      .y(d => y(d.completed))
      .curve(d3.curveMonotoneX)

    // Xè»¸
    g.append("g")
      .attr("transform", `translate(0,${height})`)
      .call(d3.axisBottom(x).tickFormat(d3.timeFormat("%m/%d")))

    // Yè»¸
    g.append("g")
      .call(d3.axisLeft(y))

    // ãƒ©ã‚¤ãƒ³æç”»
    g.append("path")
      .datum(data)
      .attr("fill", "none")
      .attr("stroke", "#3b82f6")
      .attr("stroke-width", 2)
      .attr("d", line)

    // ãƒ‡ãƒ¼ã‚¿ãƒã‚¤ãƒ³ãƒˆ
    g.selectAll(".dot")
      .data(data)
      .enter().append("circle")
      .attr("class", "dot")
      .attr("cx", d => x(new Date(d.date)))
      .attr("cy", d => y(d.completed))
      .attr("r", 4)
      .attr("fill", "#3b82f6")

  }, [data])

  return <svg ref={svgRef}></svg>
}
```

#### React Hook Form (7.57.0) - é«˜æ€§èƒ½ãƒ•ã‚©ãƒ¼ãƒ ç®¡ç†

**å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: https://react-hook-form.com/

React Hook Formã¯ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’é‡è¦–ã—ãŸãƒ•ã‚©ãƒ¼ãƒ ç®¡ç†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚

**ãªãœReact Hook Formã‚’é¸ã‚“ã ã‹**ï¼š
- **æœ€å°é™ã®å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°**: éåˆ¶å¾¡ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ™ãƒ¼ã‚¹ã§é«˜é€Ÿ
- **è»½é‡**: ~25KBï¼ˆgzipåœ§ç¸®æ™‚ï¼‰
- **ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³çµ±åˆ**: Zodãªã©ã®ã‚¹ã‚­ãƒ¼ãƒãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨å®Œå…¨çµ±åˆ
- **é–‹ç™ºè€…ä½“é¨“**: ã‚·ãƒ³ãƒ—ãƒ«ãªAPIã¨å„ªã‚ŒãŸTypeScriptã‚µãƒãƒ¼ãƒˆ

**Team Insightã§ã®å®Ÿè£…ä¾‹**ï¼š
```typescript
// components/projects/CreateProjectForm.tsx
import { useForm } from 'react-hook-form'
import { zodResolver } from '@hookform/resolvers/zod'
import { z } from 'zod'

// Zodã§ã‚¹ã‚­ãƒ¼ãƒå®šç¾©
const createProjectSchema = z.object({
  name: z.string()
    .min(1, 'åå‰ã¯å¿…é ˆã§ã™')
    .max(100, 'åå‰ã¯100æ–‡å­—ä»¥å†…ã§å…¥åŠ›ã—ã¦ãã ã•ã„'),
  description: z.string()
    .min(10, 'èª¬æ˜ã¯10æ–‡å­—ä»¥ä¸Šã§å…¥åŠ›ã—ã¦ãã ã•ã„')
    .optional(),
  startDate: z.string().refine((date) => {
    return new Date(date) >= new Date()
  }, 'é–‹å§‹æ—¥ã¯ä»Šæ—¥ä»¥é™ã®æ—¥ä»˜ã‚’é¸æŠã—ã¦ãã ã•ã„'),
  endDate: z.string(),
  memberIds: z.array(z.string()).min(1, 'ãƒ¡ãƒ³ãƒãƒ¼ã‚’1äººä»¥ä¸Šé¸æŠã—ã¦ãã ã•ã„')
}).refine((data) => {
  return new Date(data.endDate) > new Date(data.startDate)
}, {
  message: 'çµ‚äº†æ—¥ã¯é–‹å§‹æ—¥ã‚ˆã‚Šå¾Œã®æ—¥ä»˜ã‚’é¸æŠã—ã¦ãã ã•ã„',
  path: ['endDate']
})

type CreateProjectFormData = z.infer<typeof createProjectSchema>

export function CreateProjectForm() {
  const {
    register,
    handleSubmit,
    formState: { errors, isSubmitting },
    watch,
    setValue,
    control
  } = useForm<CreateProjectFormData>({
    resolver: zodResolver(createProjectSchema),
    defaultValues: {
      memberIds: []
    }
  })

  const onSubmit = async (data: CreateProjectFormData) => {
    try {
      await projectService.createProject(data)
      toast.success('ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã¾ã—ãŸ')
    } catch (error) {
      toast.error('ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆã«å¤±æ•—ã—ã¾ã—ãŸ')
    }
  }

  return (
    <form onSubmit={handleSubmit(onSubmit)}>
      <div>
        <label>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå</label>
        <input
          {...register('name')}
          type="text"
          placeholder="æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ"
        />
        {errors.name && (
          <span className="text-red-500">{errors.name.message}</span>
        )}
      </div>

      <div>
        <label>èª¬æ˜</label>
        <textarea
          {...register('description')}
          placeholder="ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®èª¬æ˜ã‚’å…¥åŠ›"
          rows={4}
        />
        {errors.description && (
          <span className="text-red-500">{errors.description.message}</span>
        )}
      </div>

      <button type="submit" disabled={isSubmitting}>
        {isSubmitting ? 'ä½œæˆä¸­...' : 'ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆ'}
      </button>
    </form>
  )
}
```

#### Zod (3.25.64) - TypeScript First ã‚¹ã‚­ãƒ¼ãƒãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

**å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: https://zod.dev/

Zodã¯ã€TypeScriptãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆãªã‚¹ã‚­ãƒ¼ãƒå®£è¨€ã¨ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚

**ãªãœZodã‚’é¸ã‚“ã ã‹**ï¼š
- **å‹æ¨è«–**: ã‚¹ã‚­ãƒ¼ãƒã‹ã‚‰è‡ªå‹•çš„ã«TypeScriptå‹ã‚’ç”Ÿæˆ
- **è±Šå¯Œãªãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³**: çµ„ã¿è¾¼ã¿ã®æ¤œè¨¼ãƒ¡ã‚½ãƒƒãƒ‰ãŒå……å®Ÿ
- **ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸**: ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½ãªæ—¥æœ¬èªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
- **å®Ÿè¡Œæ™‚æ¤œè¨¼**: APIãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®æ¤œè¨¼ã«ã‚‚ä½¿ç”¨å¯èƒ½

**Team Insightã§ã®é«˜åº¦ãªä½¿ç”¨ä¾‹**ï¼š
```typescript
// schemas/user.ts
import { z } from 'zod'

// åŸºæœ¬çš„ãªã‚¹ã‚­ãƒ¼ãƒ
export const userSchema = z.object({
  id: z.string().uuid(),
  email: z.string().email('æœ‰åŠ¹ãªãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'),
  name: z.string().min(1, 'åå‰ã¯å¿…é ˆã§ã™'),
  role: z.enum(['ADMIN', 'PROJECT_LEADER', 'MEMBER']),
  isActive: z.boolean(),
  createdAt: z.string().datetime(),
  updatedAt: z.string().datetime()
})

// éƒ¨åˆ†çš„ãªã‚¹ã‚­ãƒ¼ãƒï¼ˆæ›´æ–°ç”¨ï¼‰
export const updateUserSchema = userSchema.partial().omit({
  id: true,
  createdAt: true,
  updatedAt: true
})

// APIãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®æ¤œè¨¼
export const userResponseSchema = z.object({
  success: z.boolean(),
  data: userSchema,
  message: z.string().optional()
})

// é…åˆ—ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
export const usersListSchema = z.object({
  users: z.array(userSchema),
  total: z.number().int().nonnegative(),
  page: z.number().int().positive(),
  pageSize: z.number().int().positive()
})

// ã‚«ã‚¹ã‚¿ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
export const passwordSchema = z.string()
  .min(8, 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯8æ–‡å­—ä»¥ä¸Šã§å…¥åŠ›ã—ã¦ãã ã•ã„')
  .regex(/[A-Z]/, 'å¤§æ–‡å­—ã‚’1æ–‡å­—ä»¥ä¸Šå«ã‚ã¦ãã ã•ã„')
  .regex(/[a-z]/, 'å°æ–‡å­—ã‚’1æ–‡å­—ä»¥ä¸Šå«ã‚ã¦ãã ã•ã„')
  .regex(/[0-9]/, 'æ•°å­—ã‚’1æ–‡å­—ä»¥ä¸Šå«ã‚ã¦ãã ã•ã„')
  .regex(/[^A-Za-z0-9]/, 'ç‰¹æ®Šæ–‡å­—ã‚’1æ–‡å­—ä»¥ä¸Šå«ã‚ã¦ãã ã•ã„')

// ä½¿ç”¨ä¾‹
try {
  const validatedUser = userSchema.parse(apiResponse)
  // validatedUser ã¯å‹å®‰å…¨
} catch (error) {
  if (error instanceof z.ZodError) {
    console.error('ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼:', error.errors)
  }
}
```

#### date-fns (4.1.0) - ãƒ¢ãƒ€ãƒ³ãªæ—¥ä»˜æ“ä½œãƒ©ã‚¤ãƒ–ãƒ©ãƒª

**å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: https://date-fns.org/

date-fnsã¯ã€ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å¼ã§è»½é‡ãªæ—¥ä»˜æ“ä½œãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚

**ãªãœdate-fnsã‚’é¸ã‚“ã ã‹**ï¼š
- **ãƒ„ãƒªãƒ¼ã‚·ã‚§ã‚¤ã‚­ãƒ³ã‚°**: ä½¿ç”¨ã™ã‚‹é–¢æ•°ã®ã¿ãƒãƒ³ãƒ‰ãƒ«
- **ã‚¤ãƒŸãƒ¥ãƒ¼ã‚¿ãƒ–ãƒ«**: å…ƒã®æ—¥ä»˜ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å¤‰æ›´ã—ãªã„
- **å›½éš›åŒ–å¯¾å¿œ**: æ—¥æœ¬èªãƒ­ã‚±ãƒ¼ãƒ«ã®ã‚µãƒãƒ¼ãƒˆ
- **TypeScript**: å®Œå…¨ãªå‹ã‚µãƒãƒ¼ãƒˆ

**Team Insightã§ã®å®Ÿè£…ä¾‹**ï¼š
```typescript
// utils/date.ts
import {
  format,
  formatDistance,
  formatRelative,
  parseISO,
  addDays,
  subDays,
  startOfMonth,
  endOfMonth,
  eachDayOfInterval,
  isWeekend,
  isSameDay,
  differenceInDays,
  differenceInBusinessDays
} from 'date-fns'
import { ja } from 'date-fns/locale'

// æ—¥ä»˜ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆé–¢æ•°
export const formatDate = (date: string | Date, pattern = 'yyyyå¹´MMæœˆddæ—¥') => {
  const dateObj = typeof date === 'string' ? parseISO(date) : date
  return format(dateObj, pattern, { locale: ja })
}

// ç›¸å¯¾æ™‚é–“è¡¨ç¤º
export const formatRelativeTime = (date: string | Date) => {
  const dateObj = typeof date === 'string' ? parseISO(date) : date
  return formatDistance(dateObj, new Date(), {
    addSuffix: true,
    locale: ja
  })
}

// ã‚¹ãƒ—ãƒªãƒ³ãƒˆæœŸé–“ã®è¨ˆç®—
export const calculateSprintDays = (startDate: Date, endDate: Date) => {
  const days = eachDayOfInterval({ start: startDate, end: endDate })
  const businessDays = days.filter(day => !isWeekend(day))
  return {
    totalDays: days.length,
    businessDays: businessDays.length,
    weekends: days.length - businessDays.length
  }
}

// ã‚¿ã‚¹ã‚¯ã®é…å»¶æ—¥æ•°è¨ˆç®—
export const calculateDelay = (dueDate: string, completedDate?: string) => {
  const due = parseISO(dueDate)
  const completed = completedDate ? parseISO(completedDate) : new Date()
  
  const delayDays = differenceInDays(completed, due)
  const delayBusinessDays = differenceInBusinessDays(completed, due)
  
  return {
    delayDays,
    delayBusinessDays,
    isDelayed: delayDays > 0,
    status: delayDays > 0 ? 'é…å»¶' : 'æœŸé™å†…'
  }
}

// Team Insightã§ã®ä½¿ç”¨ä¾‹
function TaskCard({ task }: { task: Task }) {
  const delay = calculateDelay(task.dueDate, task.completedDate)
  
  return (
    <div className="task-card">
      <h3>{task.title}</h3>
      <p>æœŸé™: {formatDate(task.dueDate)}</p>
      <p>ä½œæˆ: {formatRelativeTime(task.createdAt)}</p>
      {delay.isDelayed && (
        <span className="text-red-500">
          {delay.delayBusinessDays}å–¶æ¥­æ—¥é…å»¶
        </span>
      )}
    </div>
  )
}
```

## ğŸ”„ ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ - è©³ç´°è§£èª¬

### èªè¨¼ãƒ•ãƒ­ãƒ¼ï¼ˆOAuth 2.0ï¼‰

**OAuth 2.0ã¨ã¯ï¼Ÿ**
OAuth 2.0ã¯ã€ç¬¬ä¸‰è€…ã®ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆBacklogï¼‰ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½¿ã£ã¦ã€å®‰å…¨ã«ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹ä»•çµ„ã¿ã§ã™ã€‚ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ç›´æ¥æ‰±ã‚ãªã„ãŸã‚å®‰å…¨ã§ã™ã€‚

#### èªè¨¼ãƒ•ãƒ­ãƒ¼ã®è©³ç´°å›³

```mermaid
sequenceDiagram
    participant U as ãƒ¦ãƒ¼ã‚¶ãƒ¼
    participant F as Frontend<br/>(Next.js)
    participant N as Nginx<br/>(Proxy)
    participant B as Backend<br/>(FastAPI)
    participant BL as Backlog<br/>(OAuth)
    participant DB as PostgreSQL
    participant R as Redis

    U->>F: ã€ŒBacklogã§ãƒ­ã‚°ã‚¤ãƒ³ã€ã‚¯ãƒªãƒƒã‚¯
    F->>N: GET /api/v1/auth/backlog/authorize
    N->>B: ãƒ—ãƒ­ã‚­ã‚·è»¢é€
    
    Note over B: stateç”Ÿæˆãƒ»ä¿å­˜
    B->>DB: OAuthStateã‚’ä¿å­˜
    B-->>F: èªè¨¼URLè¿”å´
    F->>BL: ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ<br/>(èªè¨¼ãƒšãƒ¼ã‚¸ã¸)
    
    U->>BL: ãƒ­ã‚°ã‚¤ãƒ³æƒ…å ±å…¥åŠ›
    BL->>U: èªè¨¼ç¢ºèªç”»é¢
    U->>BL: ã€Œè¨±å¯ã€ã‚¯ãƒªãƒƒã‚¯
    
    BL->>N: GET /api/v1/auth/backlog/callback<br/>?code=xxx&state=yyy
    N->>B: ãƒ—ãƒ­ã‚­ã‚·è»¢é€
    
    Note over B: stateæ¤œè¨¼
    B->>DB: OAuthStateç¢ºèª
    B->>BL: POST /oauth2/token<br/>(ã‚³ãƒ¼ãƒ‰â†’ãƒˆãƒ¼ã‚¯ãƒ³äº¤æ›)
    BL-->>B: ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³<br/>ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãƒˆãƒ¼ã‚¯ãƒ³
    
    B->>BL: GET /api/v2/users/myself
    BL-->>B: ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±
    
    B->>DB: ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆ/æ›´æ–°<br/>ãƒˆãƒ¼ã‚¯ãƒ³ä¿å­˜
    Note over B: JWTç”Ÿæˆ
    B->>R: ã‚»ãƒƒã‚·ãƒ§ãƒ³æƒ…å ±ã‚­ãƒ£ãƒƒã‚·ãƒ¥
    
    B-->>F: Set-Cookie: auth_token<br/>ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
    F->>U: ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰è¡¨ç¤º
```

**èªè¨¼ãƒ•ãƒ­ãƒ¼ã®è©³ç´°**ï¼š

```
1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã€ŒBacklogã§ãƒ­ã‚°ã‚¤ãƒ³ã€ã‚’ã‚¯ãƒªãƒƒã‚¯
   â†“
   ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼šãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆ
   window.location.href = '/api/v1/auth/backlog/authorize'
   
2. Frontend â†’ Backend: /api/v1/auth/backlog/authorize
   â†“
   ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼šèªè¨¼URLã‚’ç”Ÿæˆ
   - stateï¼ˆCSRFå¯¾ç­–ã®ãƒ©ãƒ³ãƒ€ãƒ æ–‡å­—åˆ—ï¼‰ã‚’ç”Ÿæˆ
   - Backlogã®èªè¨¼URLã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
   
3. Backend â†’ Backlog OAuth: èªè¨¼ãƒšãƒ¼ã‚¸ã¸ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
   â†“
   ãƒ–ãƒ©ã‚¦ã‚¶ãŒBacklogã®ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã«ç§»å‹•
   URLä¾‹: https://space.backlog.jp/OAuth2/authorize?client_id=xxx&state=yyy
   
4. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒBacklogã§èªè¨¼æ‰¿èª
   â†“
   ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼šBacklogã§ãƒ­ã‚°ã‚¤ãƒ³ï¼†ã€Œè¨±å¯ã€ã‚’ã‚¯ãƒªãƒƒã‚¯
   
5. Backlog â†’ Backend: /api/v1/auth/backlog/callback
   â†“
   Backlogï¼šèªè¨¼ã‚³ãƒ¼ãƒ‰ã‚’ä»˜ã‘ã¦ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯
   URLä¾‹: /api/v1/auth/backlog/callback?code=abc123&state=yyy
   
6. Backend: JWTãƒˆãƒ¼ã‚¯ãƒ³ç”Ÿæˆã€HttpOnlyã‚¯ãƒƒã‚­ãƒ¼ã«è¨­å®š
   â†“
   ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å‡¦ç†ï¼š
   - stateã‚’æ¤œè¨¼ï¼ˆCSRFå¯¾ç­–ï¼‰
   - èªè¨¼ã‚³ãƒ¼ãƒ‰ã‚’ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã«äº¤æ›
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’å–å¾—ãƒ»ä¿å­˜
   - JWTãƒˆãƒ¼ã‚¯ãƒ³ã‚’ç”Ÿæˆ
   - HttpOnlyã‚¯ãƒƒã‚­ãƒ¼ã«ä¿å­˜ï¼ˆXSSå¯¾ç­–ï¼‰
   
7. Backend â†’ Frontend: ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸã€ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã¸ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
   
   æœ€çµ‚çš„ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ãƒ­ã‚°ã‚¤ãƒ³æ¸ˆã¿çŠ¶æ…‹ã§ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã¸
```

**ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–ã®èª¬æ˜**ï¼š
- **state**: CSRFï¼ˆã‚¯ãƒ­ã‚¹ã‚µã‚¤ãƒˆãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ•ã‚©ãƒ¼ã‚¸ã‚§ãƒªï¼‰æ”»æ’ƒã‚’é˜²ã
- **HttpOnlyã‚¯ãƒƒã‚­ãƒ¼**: JavaScriptã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„ãŸã‚ã€XSSæ”»æ’ƒã‚’é˜²ã
- **JWT**: ç½²åä»˜ããƒˆãƒ¼ã‚¯ãƒ³ã§ã€æ”¹ã–ã‚“ã‚’æ¤œå‡ºå¯èƒ½

### APIãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ•ãƒ­ãƒ¼ - è©³ç´°

#### APIãƒªã‚¯ã‚¨ã‚¹ãƒˆã®å‡¦ç†ãƒ•ãƒ­ãƒ¼å›³

```mermaid
flowchart LR
    subgraph Frontend["Frontend (Next.js)"]
        C[Component]
        TQ[TanStack Query]
        AX[Axios Client]
    end
    
    subgraph Nginx["Nginx"]
        RP[Reverse Proxy]
    end
    
    subgraph Backend["Backend (FastAPI)"]
        MW[Middleware]
        AUTH[èªè¨¼ãƒ»èªå¯]
        EP[Endpoint]
        SVC[Service Layer]
    end
    
    subgraph Cache["Cache Layer"]
        REDIS[(Redis)]
    end
    
    subgraph Database["Database"]
        PG[(PostgreSQL)]
    end
    
    C -->|useQuery| TQ
    TQ -->|HTTP Request| AX
    AX -->|Cookieä»˜ã| RP
    RP -->|ãƒ—ãƒ­ã‚­ã‚·| MW
    MW -->|JWTæ¤œè¨¼| AUTH
    AUTH -->|æ¨©é™ãƒã‚§ãƒƒã‚¯| EP
    EP -->|ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç¢ºèª| REDIS
    REDIS -.->|ãƒ’ãƒƒãƒˆ| EP
    REDIS -->|ãƒŸã‚¹| SVC
    SVC -->|SQL| PG
    PG -->|ãƒ‡ãƒ¼ã‚¿| SVC
    SVC -->|ã‚­ãƒ£ãƒƒã‚·ãƒ¥ä¿å­˜| REDIS
    SVC -->|ãƒ¬ã‚¹ãƒãƒ³ã‚¹| EP
    EP -->|JSON| RP
    RP -->|è»¢é€| TQ
    TQ -->|çŠ¶æ…‹æ›´æ–°| C
```

#### ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒ•ãƒ­ãƒ¼

```mermaid
flowchart TD
    REQ[APIãƒªã‚¯ã‚¨ã‚¹ãƒˆ] --> AUTH{èªè¨¼ãƒã‚§ãƒƒã‚¯}
    AUTH -->|æœªèªè¨¼| E401[401 Unauthorized]
    AUTH -->|èªè¨¼æ¸ˆã¿| PERM{æ¨©é™ãƒã‚§ãƒƒã‚¯}
    PERM -->|æ¨©é™ãªã—| E403[403 Forbidden]
    PERM -->|æ¨©é™ã‚ã‚Š| VALID{ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³}
    VALID -->|ã‚¨ãƒ©ãƒ¼| E422[422 Validation Error]
    VALID -->|æˆåŠŸ| PROC[å‡¦ç†å®Ÿè¡Œ]
    PROC -->|DBæ¥ç¶šã‚¨ãƒ©ãƒ¼| E503[503 Service Unavailable]
    PROC -->|ãƒ“ã‚¸ãƒã‚¹ã‚¨ãƒ©ãƒ¼| E400[400 Bad Request]
    PROC -->|æˆåŠŸ| R200[200 OK]
    
    E401 --> ELOG[ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°è¨˜éŒ²]
    E403 --> ELOG
    E422 --> ELOG
    E503 --> ELOG
    E400 --> ELOG
    
    ELOG --> RESP[ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹]
    R200 --> SRESP[æˆåŠŸãƒ¬ã‚¹ãƒãƒ³ã‚¹]
    
    style E401 fill:#ff6b6b
    style E403 fill:#ff6b6b
    style E422 fill:#ffa06b
    style E503 fill:#ff6b6b
    style E400 fill:#ffa06b
    style R200 fill:#51cf66
```

**å®Ÿéš›ã®ã‚³ãƒ¼ãƒ‰ã§ã®æµã‚Œ**ï¼š

```typescript
// 1. Frontend: TanStack Queryã§ãƒ‡ãƒ¼ã‚¿è¦æ±‚
const ProjectList = () => {
  const { data, isLoading } = useProjects()  // ã“ã“ã§APIã‚³ãƒ¼ãƒ«é–‹å§‹
}

// 2. Axios Interceptor: èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ã‚’è‡ªå‹•ä»˜ä¸
// src/lib/api-client.ts
axios.interceptors.request.use((config) => {
  // ã‚¯ãƒƒã‚­ãƒ¼ã¯è‡ªå‹•çš„ã«é€ä¿¡ã•ã‚Œã‚‹ï¼ˆcredentials: 'include'ï¼‰
  return config
})

// 3. Nginx: /api/* ã‚’ Backend:8000 ã¸ãƒ—ãƒ­ã‚­ã‚·
// nginx.conf
location /api {
    proxy_pass http://backend:8000;  // ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã«ãƒ—ãƒ­ã‚­ã‚·
}

// 4. Backend: èªè¨¼ãƒ»æ¨©é™ãƒã‚§ãƒƒã‚¯ï¼ˆRBACï¼‰
@app.get("/api/v1/projects")
async def get_projects(
    current_user: User = Depends(get_current_user),  # JWTæ¤œè¨¼
    _: None = Depends(require_role("MEMBER"))        # æ¨©é™ãƒã‚§ãƒƒã‚¯
):
    # 5. Redisã‚­ãƒ£ãƒƒã‚·ãƒ¥ç¢ºèª
    cache_key = f"projects:user:{current_user.id}"
    cached = await redis_client.get(cache_key)
    if cached:
        return json.loads(cached)  # ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆï¼
    
    # 6. PostgreSQLã‹ã‚‰ãƒ‡ãƒ¼ã‚¿å–å¾—
    projects = db.query(Project).filter(
        Project.members.any(user_id=current_user.id)
    ).all()
    
    # 7. ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’Redisã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥
    await redis_client.setex(
        cache_key, 
        300,  # 5åˆ†é–“
        json.dumps(projects)
    )
    
    # 8. JSONãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”ã™
    return projects

// 9. TanStack Query: ãƒ‡ãƒ¼ã‚¿ã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã€UIã‚’æ›´æ–°
// ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã«æˆ»ã‚‹
const ProjectList = () => {
  const { data } = useProjects()  // dataã«çµæœãŒå…¥ã‚‹
  return data.map(p => <ProjectCard project={p} />)
}
```

**ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®ãƒã‚¤ãƒ³ãƒˆ**ï¼š
1. **å¤šå±¤ã‚­ãƒ£ãƒƒã‚·ãƒ¥**:
   - ãƒ–ãƒ©ã‚¦ã‚¶: TanStack QueryãŒãƒ¡ãƒ¢ãƒªã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥
   - ã‚µãƒ¼ãƒãƒ¼: RedisãŒé«˜é€Ÿã‚­ãƒ£ãƒƒã‚·ãƒ¥
   - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹: PostgreSQLã®ã‚¯ã‚¨ãƒªã‚­ãƒ£ãƒƒã‚·ãƒ¥

2. **ä¸¦åˆ—å‡¦ç†**:
   - è¤‡æ•°ã®APIã‚³ãƒ¼ãƒ«ã‚’åŒæ™‚å®Ÿè¡Œ
   - éåŒæœŸå‡¦ç†ã§å¾…ã¡æ™‚é–“ã‚’å‰Šæ¸›

3. **æœ€é©åŒ–**:
   - å¿…è¦ãªãƒ‡ãƒ¼ã‚¿ã®ã¿å–å¾—ï¼ˆGraphQLã§ã¯ãªã„ãŒã€åŒæ§˜ã®è€ƒãˆæ–¹ï¼‰
   - ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³å¯¾å¿œ

## ğŸ” ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¬ã‚¤ãƒ¤ãƒ¼æ§‹æˆå›³

```mermaid
flowchart TB
    subgraph External["å¤–éƒ¨"]
        USER[ãƒ¦ãƒ¼ã‚¶ãƒ¼]
        ATTACKER[æ”»æ’ƒè€…]
    end
    
    subgraph SecurityLayers["ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¬ã‚¤ãƒ¤ãƒ¼"]
        subgraph L1["ãƒ¬ã‚¤ãƒ¤ãƒ¼1: ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯"]
            HTTPS[HTTPS/TLS 1.3]
            CORS[CORSè¨­å®š]
        end
        
        subgraph L2["ãƒ¬ã‚¤ãƒ¤ãƒ¼2: èªè¨¼"]
            OAUTH[Backlog OAuth 2.0]
            JWT[JWT (HttpOnly Cookie)]
            CSRF[CSRF Protection]
        end
        
        subgraph L3["ãƒ¬ã‚¤ãƒ¤ãƒ¼3: èªå¯"]
            RBAC[RBAC ã‚·ã‚¹ãƒ†ãƒ ]
            PERM[æ¨©é™ãƒã‚§ãƒƒã‚¯]
        end
        
        subgraph L4["ãƒ¬ã‚¤ãƒ¤ãƒ¼4: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³"]
            VALID[å…¥åŠ›æ¤œè¨¼ (Pydantic)]
            ORM[SQLAlchemy ORM]
            XSS[XSSå¯¾ç­– (React)]
        end
        
        subgraph L5["ãƒ¬ã‚¤ãƒ¤ãƒ¼5: ãƒ‡ãƒ¼ã‚¿"]
            ENCRYPT[ä¿å­˜æ™‚æš—å·åŒ–]
            AUDIT[ç›£æŸ»ãƒ­ã‚°]
        end
    end
    
    USER -->|æ­£è¦ã‚¢ã‚¯ã‚»ã‚¹| HTTPS
    ATTACKER -.->|æ”»æ’ƒè©¦è¡Œ| HTTPS
    HTTPS --> CORS
    CORS --> OAUTH
    OAUTH --> JWT
    JWT --> CSRF
    CSRF --> RBAC
    RBAC --> PERM
    PERM --> VALID
    VALID --> ORM
    ORM --> XSS
    XSS --> ENCRYPT
    ENCRYPT --> AUDIT
    
    style ATTACKER fill:#ff6b6b
    style USER fill:#51cf66
```

### èªè¨¼ãƒ»èªå¯

1. **OAuth 2.0**: Backlogèªè¨¼ã«ã‚ˆã‚‹ã‚»ã‚­ãƒ¥ã‚¢ãªãƒ­ã‚°ã‚¤ãƒ³
2. **JWT**: HttpOnlyã‚¯ãƒƒã‚­ãƒ¼ã§XSSæ”»æ’ƒã‚’é˜²æ­¢
3. **RBAC**: ãƒ­ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡
   - ADMIN: å…¨æ¨©é™
   - PROJECT_LEADER: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†æ¨©é™
   - MEMBER: åŸºæœ¬çš„ãªé–²è¦§ãƒ»æ“ä½œæ¨©é™

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–

```python
# CORSè¨­å®šï¼ˆbackend/app/main.pyï¼‰
app.add_middleware(
    CORSMiddleware,
    allow_origins=allowed_origins,  # è¨±å¯ã•ã‚ŒãŸã‚ªãƒªã‚¸ãƒ³ã®ã¿
    allow_credentials=True,         # Cookieèªè¨¼ã®ãŸã‚å¿…é ˆ
    allow_methods=["*"],
    allow_headers=["*"],
)

# ãƒ¬ãƒ¼ãƒˆåˆ¶é™ï¼ˆä»Šå¾Œå®Ÿè£…äºˆå®šï¼‰
# SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³å¯¾ç­–: SQLAlchemy ORMä½¿ç”¨
# XSSå¯¾ç­–: Reactã®è‡ªå‹•ã‚¨ã‚¹ã‚±ãƒ¼ãƒ— + HttpOnlyã‚¯ãƒƒã‚­ãƒ¼
```

## ğŸ—ï¸ ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£

### Docker Composeæ§‹æˆ

```yaml
# docker-compose.yml ã®æ§‹é€ 
services:
  nginx:       # ãƒªãƒãƒ¼ã‚¹ãƒ—ãƒ­ã‚­ã‚·
  frontend:    # Next.jsã‚¢ãƒ—ãƒª
  backend:     # FastAPI API
  postgres:    # PostgreSQL 15
  redis:       # Redis 7.0
  mailhog:     # é–‹ç™ºç”¨ãƒ¡ãƒ¼ãƒ«ã‚µãƒ¼ãƒãƒ¼
```

### ç’°å¢ƒå¤‰æ•°ç®¡ç†

- **é–‹ç™ºç’°å¢ƒ**: `.env`ãƒ•ã‚¡ã‚¤ãƒ«ã§ç®¡ç†
- **æœ¬ç•ªç’°å¢ƒ**: ç’°å¢ƒå¤‰æ•°ã¾ãŸã¯Secrets Manager
- **æ©Ÿå¯†æƒ…å ±**: çµ¶å¯¾ã«ã‚³ãƒŸãƒƒãƒˆã—ãªã„ï¼ˆ.gitignoreï¼‰

## ğŸ’¡ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£é¸å®šã®ãƒã‚¤ãƒ³ãƒˆ

### ãªãœã“ã®æ§‹æˆãªã®ã‹ï¼Ÿ

1. **ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£**
   - ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰/ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®åˆ†é›¢ã§ç‹¬ç«‹ã—ãŸã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ãŒå¯èƒ½
   - Redisã‚­ãƒ£ãƒƒã‚·ãƒ¥ã§è² è·è»½æ¸›

2. **é–‹ç™ºåŠ¹ç‡**
   - TypeScript/Pythonã®å‹ã‚·ã‚¹ãƒ†ãƒ ã§ãƒã‚°ã‚’äº‹å‰ã«é˜²æ­¢
   - è‡ªå‹•ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆã§é–‹ç™ºåŠ¹ç‡å‘ä¸Š

3. **ä¿å®ˆæ€§**
   - æ˜ç¢ºãªè²¬ä»»åˆ†é›¢
   - æ¨™æº–çš„ãªæŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ã§å­¦ç¿’ã‚³ã‚¹ãƒˆä½æ¸›

4. **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**
   - æ¥­ç•Œæ¨™æº–ã®OAuth 2.0èªè¨¼
   - å¤šå±¤é˜²å¾¡ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­è¨ˆ

## ğŸ“ é–‹ç™ºæ™‚ã®æ³¨æ„ç‚¹

1. **APIè¨­è¨ˆ**
   - RESTfulãªè¨­è¨ˆã‚’ç¶­æŒ
   - é©åˆ‡ãªHTTPã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’è¿”ã™
   - ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã¯çµ±ä¸€ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

2. **çŠ¶æ…‹ç®¡ç†**
   - ã‚µãƒ¼ãƒãƒ¼çŠ¶æ…‹: TanStack Query
   - ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆçŠ¶æ…‹: Reduxï¼ˆæœ€å°é™ï¼‰
   - ãƒ­ãƒ¼ã‚«ãƒ«çŠ¶æ…‹: React useState

3. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**
   - N+1å•é¡Œã«æ³¨æ„ï¼ˆSQLAlchemyã®eager loadingæ´»ç”¨ï¼‰
   - é©åˆ‡ãªã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹è¨­å®š
   - ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥ã®æ¤œè¨

---

æ¬¡ã¯[FastAPIãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®åŸºæœ¬](03-backend-basics.md)ã§ã€å®Ÿéš›ã®ã‚³ãƒ¼ãƒ‰å®Ÿè£…ã‚’è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ï¼